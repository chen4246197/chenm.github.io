<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[test]]></title>
      <url>/chenm.github.io/2017/09/23/test/</url>
      <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">test</div></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Testing </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Testing </tag>
            
            <tag> Another Tag </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[shell脚本编程]]></title>
      <url>/chenm.github.io/2017/09/23/hello-world/</url>
      <content type="html"><![CDATA[<h2 id="shell应用实例"><a href="#shell应用实例" class="headerlink" title="shell应用实例"></a>shell应用实例</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">ex1.sh</div><div class="line"></div><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line"><span class="comment">#This is to show what a example looks like.</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"My First Shell!"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"This is current directory."</span></div><div class="line">/bin/<span class="built_in">pwd</span></div><div class="line"><span class="built_in">echo</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"This is files."</span></div><div class="line">/bin/ls </div><div class="line"></div><div class="line">使用 sh ex1 运行脚本程序即可</div><div class="line"></div><div class="line">如果我们想使用shell脚本，指定计划任务，</div><div class="line">比如每周的周一到周五给管理员发一个信息</div><div class="line">（比如当前主机的信息，如内存的使用情况，在线人数，磁盘空间等）</div><div class="line"></div><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line">/bin/date +%F &gt;&gt; /<span class="built_in">test</span>/shelldir/ex2.info</div><div class="line"><span class="built_in">echo</span> <span class="string">"disk info:"</span> &gt;&gt; /<span class="built_in">test</span>/shelldir/ex2.info</div><div class="line">/bin/df -h &gt;&gt; /<span class="built_in">test</span>/shelldir/ex2.info</div><div class="line"><span class="built_in">echo</span> &gt;&gt; /<span class="built_in">test</span>/shelldir/ex2.info</div><div class="line"><span class="built_in">echo</span> <span class="string">"online users:"</span> &gt;&gt; /<span class="built_in">test</span>/shelldir/ex2.info</div><div class="line">/usr/bin/who | /bin/grep -v root &gt;&gt; /<span class="built_in">test</span>/shelldir/ex2.info</div><div class="line"><span class="built_in">echo</span> <span class="string">"memory info:"</span> &gt;&gt; /<span class="built_in">test</span>/shelldir/ex2.info</div><div class="line">/usr/bin/free -m &gt;&gt; /<span class="built_in">test</span>/shelldir/ex2.info</div><div class="line"><span class="built_in">echo</span> &gt;&gt; /<span class="built_in">test</span>/shelldir/ex2.info</div><div class="line"><span class="comment">#write root</span></div><div class="line">/usr/bin/write root &lt; /<span class="built_in">test</span>/shelldir/ex2.info &amp;&amp; /bin/rm /<span class="built_in">test</span>/shelldir/ex2.info</div><div class="line"><span class="comment">#crontab -e</span></div><div class="line"><span class="comment">#0 9 * * 1-5 /bin /sh /test/ex2.sh</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="自定义变量"><a href="#自定义变量" class="headerlink" title="自定义变量"></a>自定义变量</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">变量：是<span class="keyword">shell</span><span class="bash">传递数据的一种方法，用来代表每个取值的符号名。</span></div><div class="line"><span class="bash">Shell有两类变量：临时变量和永久变量</span></div><div class="line"><span class="bash">临时变量是shell程序内部定义的，其使用范围仅限于定义它的程序，</span></div><div class="line"><span class="bash">对其它程序不可见。包括：用户自定义变量、位置变量。</span></div><div class="line"><span class="bash">永久变量是环境变量，其值不随shell脚本的执行结束而消失。</span></div><div class="line"><span class="bash"></span></div><div class="line"><span class="bash">变量的定义：</span></div><div class="line"><span class="bash">用户定义的变量由字母或下划线开头，由字母。数字或下划线序列组成</span></div><div class="line"><span class="bash">，并且大小写字母意义不同。</span></div><div class="line"><span class="bash">变量名长度没有限制，在使用变量时，要在变量名前加上前缀<span class="string">"$"</span>，</span></div><div class="line"><span class="bash">一般变量使用大小写字母表示，并且是英文字母开头，赋值号<span class="string">"="</span>两边</span></div><div class="line"><span class="bash">没有空格。NUM=5，STR= <span class="string">"A String"</span></span></div><div class="line"><span class="bash">可以将一个命令的执行结果赋值给变量，但是需要使用命令替换符。``。</span></div><div class="line"><span class="bash">注意单引号和双引号的区别，<span class="string">""</span>号会吧里面的变量值进行输出，<span class="string">''</span>是会吧内容原封不动输出，不会识别里面的变量。</span></div><div class="line"><span class="bash">使用<span class="built_in">set</span>命令查看所有变量。</span></div><div class="line"><span class="bash">使用<span class="built_in">unset</span>命令删除指定变量</span></div><div class="line"><span class="bash"></span></div><div class="line"><span class="bash">变量赋值单引号和双引号的区别</span></div><div class="line"><span class="bash">[root@silencer ~]<span class="comment"># name="chenm"</span></span></div><div class="line"><span class="bash">[root@silencer ~]<span class="comment"># echo $name</span></span></div><div class="line"><span class="bash">chenm</span></div><div class="line"><span class="bash"></span></div><div class="line"><span class="bash">[root@silencer ~]<span class="comment"># myname="my name is $name"</span></span></div><div class="line"><span class="bash">[root@silencer ~]<span class="comment"># echo mynewname</span></span></div><div class="line"><span class="bash">mynewname</span></div><div class="line"><span class="bash"></span></div><div class="line"><span class="bash">[root@silencer ~]<span class="comment"># mynewname='my name is $name'</span></span></div><div class="line"><span class="bash">[root@silencer ~]<span class="comment"># echo $mynewname</span></span></div><div class="line"><span class="bash">my name is <span class="variable">$name</span></span></div><div class="line"><span class="bash"></span></div><div class="line"><span class="bash">命令替换符</span></div><div class="line"><span class="bash"></span></div><div class="line"><span class="bash">`` 是反引号，esc键下的那个键。</span></div><div class="line"><span class="bash">$(cmd)和`cmd`的作用是相同的,在执行一条命令时，会先将其中的 ``，或者是$() 中的语句当作命令执行一遍，再将结果加入到原命令中重新执行</span></div><div class="line"><span class="bash">$( ) 并不是没有毙端的...</span></div><div class="line"><span class="bash">反引号 基本上可用在全部的 unix shell 中使用，若写成 shell script ，其移植性比较高。</span></div><div class="line"><span class="bash">而 $() 并不见的每一种 shell 都能使用.</span></div><div class="line"><span class="bash"></span></div><div class="line"><span class="bash"></span></div><div class="line"><span class="bash">[root@silencer ~]<span class="comment"># p1=`date`</span></span></div><div class="line"><span class="bash">[root@silencer ~]<span class="comment"># echo $p1</span></span></div><div class="line"><span class="bash">Mon Sep 4 03:19:53 CST 2017</span></div></pre></td></tr></table></figure>
<h2 id="占位变量"><a href="#占位变量" class="headerlink" title="占位变量"></a>占位变量</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">在shell里面还有两种特殊变量，一种是位置变量，</div><div class="line">还有种是特殊的变量，在我们写Shell的时候十分的常用。</div><div class="line">位置变量 ls -l file1 file2 file3... (n范围1-9)在代码中使用</div><div class="line">最多9个。</div><div class="line"></div><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line">DATE=`/bin/date +%Y%m%d`</div><div class="line"><span class="built_in">echo</span> <span class="string">"TODAY IS <span class="variable">$DATE</span>"</span></div><div class="line">/bin/ls -l <span class="variable">$1</span></div><div class="line">/bin/ls -l <span class="variable">$2</span></div><div class="line">/bin/ls -l <span class="variable">$3</span></div><div class="line"></div><div class="line"><span class="variable">$1</span>,<span class="variable">$2</span>,<span class="variable">$3</span>参数由执行时传递过来</div><div class="line">sh ex3.sh /etc /<span class="built_in">test</span> /usr</div></pre></td></tr></table></figure>
<h2 id="特殊变量"><a href="#特殊变量" class="headerlink" title="特殊变量"></a>特殊变量</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">$* 这个程序所有参数</div><div class="line"><span class="variable">$#</span> 这个程序的参数个数</div><div class="line">$$ 这个程序的PID</div><div class="line">$! 执行上一个后台命令的PID</div><div class="line">$? 执行上一个命令的返回值</div><div class="line">$(0-9) 显示位置变量</div><div class="line"></div><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line">DATE=`/bin/date +%F`</div><div class="line"><span class="built_in">echo</span> <span class="string">"today is <span class="variable">$DATE</span>"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">'$# :'</span> <span class="variable">$#</span></div><div class="line"><span class="built_in">echo</span> <span class="string">'$* :'</span> $*</div><div class="line"><span class="built_in">echo</span> <span class="string">'$? :'</span> $?</div><div class="line"><span class="built_in">echo</span> <span class="string">'$$ :'</span> $$</div><div class="line"><span class="built_in">echo</span> <span class="string">'$0 :'</span> <span class="variable">$0</span></div><div class="line"></div><div class="line"></div><div class="line">[root@silencer shell]<span class="comment"># sh ex4.sh /aa /bb /cc</span></div><div class="line">today is 2017-09-04</div><div class="line"><span class="variable">$#</span> : 3</div><div class="line">$* : /aa /bb /cc</div><div class="line">$? : 0</div><div class="line">$$ : 8776</div><div class="line"><span class="variable">$0</span> : ex4.sh</div></pre></td></tr></table></figure>
<h2 id="read，键盘录入"><a href="#read，键盘录入" class="headerlink" title="read，键盘录入"></a>read，键盘录入</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">命令从键盘读入数据，赋值给变量</div><div class="line">   </div><div class="line">#!/bin/<span class="keyword">sh</span></div><div class="line"><span class="keyword">read</span> <span class="keyword">f</span> s t</div><div class="line"><span class="keyword">echo</span> <span class="string">"the first is $f"</span></div><div class="line"><span class="keyword">echo</span> <span class="string">"the second is $s"</span></div><div class="line"><span class="keyword">echo</span> <span class="string">"the third is $t"</span></div><div class="line">  </div><div class="line">  </div><div class="line">[root@silencer <span class="keyword">shell</span>]# <span class="keyword">sh</span> ex5.<span class="keyword">sh</span></div><div class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">4</span></div><div class="line">the <span class="keyword">first</span> <span class="keyword">is</span> <span class="number">1</span></div><div class="line">the second <span class="keyword">is</span> <span class="number">2</span></div><div class="line">the third <span class="keyword">is</span> <span class="number">4</span></div><div class="line"></div><div class="line"><span class="keyword">sh</span> -<span class="keyword">x</span> extt.<span class="keyword">sh</span> 表示跟踪<span class="keyword">shell</span>脚本执行到哪一步</div><div class="line">[root@silencer <span class="keyword">shell</span>]# <span class="keyword">sh</span> -<span class="keyword">x</span> ex5.<span class="keyword">sh</span></div><div class="line">+ <span class="keyword">read</span> <span class="keyword">f</span> s t</div><div class="line"><span class="number">5</span> <span class="number">10</span> <span class="number">21</span></div><div class="line">+ <span class="keyword">echo</span> <span class="string">'the first is 5'</span></div><div class="line">the <span class="keyword">first</span> <span class="keyword">is</span> <span class="number">5</span></div><div class="line">+ <span class="keyword">echo</span> <span class="string">'the second is 10'</span></div><div class="line">the second <span class="keyword">is</span> <span class="number">10</span></div><div class="line">+ <span class="keyword">echo</span> <span class="string">'the third is 21'</span></div><div class="line">the third <span class="keyword">is</span> <span class="number">21</span></div><div class="line"></div><div class="line">+表示执行到 <span class="keyword">read</span>这一行</div></pre></td></tr></table></figure>
<h2 id="shell运算"><a href="#shell运算" class="headerlink" title="shell运算"></a>shell运算</h2><figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">expr</span>命令，对整数进行运算。不能计算小数。</div><div class="line">注意点：<span class="number">1.</span><span class="keyword">expr</span>的运算必须用空格隔开。</div><div class="line">        <span class="number">2.</span>\*表示转义字符 *乘法</div><div class="line">        <span class="number">3.</span>保持先算乘除后算加减，如果需要优先运算则需要加命令替换符。</div><div class="line">        <span class="number">4.</span>也可对变量进行运算操作。</div><div class="line"></div><div class="line">中间都有空格</div><div class="line">[root<span class="comment">@silencer shell]# expr 10 + 5</span></div><div class="line"><span class="comment">15</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">乘法需转义</span></div><div class="line"><span class="comment">[root@</span>silencer <span class="built_in">shell</span>]<span class="meta"># expr 10 * 5</span></div><div class="line"><span class="keyword">expr</span>: syntax <span class="built_in">error</span></div><div class="line">[root<span class="comment">@silencer shell]# expr 10 \* 5</span></div><div class="line"><span class="comment">50</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">需要优先运算则需要加命令替换符</span></div><div class="line"><span class="comment">[root@</span>silencer <span class="built_in">shell</span>]<span class="meta"># expr (10 - 2)  \* 5</span></div><div class="line">-bash: syntax <span class="built_in">error</span> near unexpected <span class="built_in">token</span> `<span class="number">10</span>'</div><div class="line">[root<span class="comment">@silencer shell]# expr `expr 10 - 2`  \* 5</span></div><div class="line"><span class="comment">40</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">可以对变量进行运算</span></div><div class="line"><span class="comment">[root@</span>silencer <span class="built_in">shell</span>]<span class="meta"># NUM=30</span></div><div class="line">[root<span class="comment">@silencer shell]# echo `expr $NUM + 8`</span></div><div class="line"><span class="comment">38</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">不支持小数</span></div><div class="line"><span class="comment">[root@</span>silencer <span class="built_in">shell</span>]<span class="meta"># expr 10 / 3</span></div><div class="line"><span class="number">3</span></div><div class="line">[root<span class="comment">@silencer shell]# expr 10.2 / 3</span></div><div class="line"><span class="comment">expr: non-numeric argument</span></div></pre></td></tr></table></figure>
<h2 id="测试命令"><a href="#测试命令" class="headerlink" title="测试命令"></a>测试命令</h2><figure class="highlight subunit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">使用test命令可以对文件、字符串等进行测试，</div><div class="line">一般配合控制语句使用，不应该单独使用。如下：</div><div class="line"></div><div class="line">字符串测试</div><div class="line"><span class="keyword">test </span>str1=str2  测试字符串是否相等</div><div class="line"><span class="keyword">test </span>str1!=str2 测试字符串是否不相等</div><div class="line"><span class="keyword">test </span>str1   测试字符串是否不为空</div><div class="line"><span class="keyword">test </span>-n str1    测试字符串是否不为空</div><div class="line"><span class="keyword">test </span>-z str1    测试字符串是否为空</div><div class="line"></div><div class="line"></div><div class="line">int测试</div><div class="line"><span class="keyword">test </span>int1 -eq int2  测试整数是否相等 </div><div class="line"><span class="keyword">test </span>int1 -ne int2  测试整数是否不相等</div><div class="line"><span class="keyword">test </span>int1 -ge int2  测试int1是否&gt;=int2</div><div class="line"><span class="keyword">test </span>int1 -le int2  测试int1是否 &lt;=int2</div><div class="line"><span class="keyword">test </span>int1 -lt int2  测试int1是否&lt;int2</div><div class="line"></div><div class="line">文件测试</div><div class="line"><span class="keyword">test </span>-d file    指定文件是否目录</div><div class="line"><span class="keyword">test </span>-f file    指定文件是否常规文件</div><div class="line"><span class="keyword">test </span>-x file    指定文件是否可执行</div><div class="line"><span class="keyword">test </span>-r file    指定文件是否可读</div><div class="line"><span class="keyword">test </span>-w file    指定文件是否可写</div><div class="line"><span class="keyword">test </span>-a file    指定文件是否存在</div><div class="line"><span class="keyword">test </span>-s file    指定文件大小是否非0</div></pre></td></tr></table></figure>
<h2 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">语法格式: <span class="keyword">if</span> <span class="built_in">test</span> -d <span class="variable">$1</span> <span class="keyword">then</span> ... else...fi</div><div class="line">变量测试语句可用[]进行简化，如 <span class="built_in">test</span> -d <span class="variable">$1</span> 等价于[ -d <span class="variable">$1</span> ]</div><div class="line"></div><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line"><span class="comment"># if test $1 then ... else ... fi</span></div><div class="line"><span class="keyword">if</span> [ -d <span class="variable">$1</span> ] </div><div class="line"><span class="keyword">then</span> </div><div class="line">	<span class="built_in">echo</span> <span class="string">"this is a directory!"</span></div><div class="line"><span class="keyword">else</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"this is not a directory!"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line">注意[ -d <span class="variable">$1</span> ]中间都有空格</div></pre></td></tr></table></figure>
<h2 id="if-elseif语句"><a href="#if-elseif语句" class="headerlink" title="if elseif语句"></a>if elseif语句</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>[ -d <span class="variable">$1</span> ]</div><div class="line">   <span class="keyword">then</span> ..</div><div class="line">   <span class="keyword">elif</span> [-f <span class="variable">$1</span> ]</div><div class="line">   <span class="keyword">then</span> ...</div><div class="line">   <span class="keyword">else</span> ...</div><div class="line">   <span class="keyword">fi</span></div><div class="line">   </div><div class="line">   <span class="comment">#!/bin/sh</span></div><div class="line">   <span class="comment"># if test  then ... elif test then ... else ... fi</span></div><div class="line">   <span class="keyword">if</span> [ -d <span class="variable">$1</span> ]</div><div class="line">   	<span class="keyword">then</span></div><div class="line">   	<span class="built_in">echo</span> <span class="string">"is a directory!"</span></div><div class="line">   <span class="keyword">elif</span> [ -f <span class="variable">$1</span> ]</div><div class="line">   	<span class="keyword">then</span></div><div class="line">   	<span class="built_in">echo</span> <span class="string">"is a file!"</span></div><div class="line">   <span class="keyword">else</span> </div><div class="line">   	<span class="built_in">echo</span> <span class="string">"error!"</span></div><div class="line">   <span class="keyword">fi</span></div></pre></td></tr></table></figure>
<h2 id="逻辑的-and-与-or"><a href="#逻辑的-and-与-or" class="headerlink" title="逻辑的(and)与(or)"></a>逻辑的(and)与(or)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&amp;&amp;   逻辑的 AND 的意思, -a 也是这个意思</div><div class="line">||  逻辑的 OR 的意思， -o 也是这个意思</div><div class="line"></div><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line"><span class="comment"># -a -o </span></div><div class="line"><span class="keyword">if</span> [ <span class="variable">$1</span> -eq <span class="variable">$2</span> -a <span class="variable">$1</span> = 1 ]</div><div class="line">	<span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"param1 == param2 and param1 = 1"</span></div><div class="line"><span class="keyword">elif</span> [ <span class="variable">$1</span> -ne <span class="variable">$2</span> -o <span class="variable">$1</span> = 2  ]</div><div class="line">	<span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span>  <span class="string">"param1 != param2 or param1 = 2"</span></div><div class="line"><span class="keyword">else</span></div><div class="line"> 	<span class="built_in">echo</span> <span class="string">"others"</span></div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure>
<h2 id="for循环（名字表循环）"><a href="#for循环（名字表循环）" class="headerlink" title="for循环（名字表循环）"></a>for循环（名字表循环）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">for...done语句格式：</div><div class="line"><span class="keyword">for</span> 变量 <span class="keyword">in</span> 名字表</div><div class="line"><span class="keyword">do</span></div><div class="line">    命令列表</div><div class="line"><span class="keyword">done</span>    </div><div class="line"></div><div class="line"></div><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line"><span class="comment"># for var in [params] do ... done</span></div><div class="line"><span class="keyword">for</span> var <span class="keyword">in</span> 1 2 3 4 5 6 7 8 9 10</div><div class="line"><span class="keyword">do</span> </div><div class="line">	<span class="built_in">echo</span> <span class="string">"number is <span class="variable">$var</span>"</span></div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>
<h2 id="select循环"><a href="#select循环" class="headerlink" title="select循环"></a>select循环</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">select 变量 <span class="keyword">in</span>  列表</div><div class="line"><span class="keyword">do</span></div><div class="line">	命令列表</div><div class="line"><span class="keyword">done</span></div><div class="line"></div><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line"><span class="comment"># select var in [params] do ... done</span></div><div class="line">select var <span class="keyword">in</span> <span class="string">"java"</span> <span class="string">"c++"</span> <span class="string">"php"</span> <span class="string">"linux"</span> <span class="string">"python"</span> <span class="string">"ruby"</span> <span class="string">"c#"</span> </div><div class="line"><span class="keyword">do</span> </div><div class="line">	<span class="built_in">break</span></div><div class="line"><span class="keyword">done</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"you selected <span class="variable">$var</span>"</span></div><div class="line"></div><div class="line">[root@silencer shell]<span class="comment"># sh ex10.sh</span></div><div class="line">1) java</div><div class="line">2) c++</div><div class="line">3) php</div><div class="line">4) linux</div><div class="line">5) python</div><div class="line">6) ruby</div><div class="line">7) c<span class="comment">#</span></div><div class="line"><span class="comment">#? 1</span></div><div class="line">you selected java</div><div class="line"></div><div class="line">列出所有选项，输入选择第几项，执行命令</div></pre></td></tr></table></figure>
<h2 id="case-语句"><a href="#case-语句" class="headerlink" title="case 语句"></a>case 语句</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">case</span> 变量 <span class="keyword">in</span></div><div class="line">    字符串 1) 命令列表1;;</div><div class="line">    ...</div><div class="line">    字符串 n) 命令列表n;;</div><div class="line"><span class="keyword">esac</span></div><div class="line"></div><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line"><span class="built_in">read</span> op</div><div class="line"><span class="keyword">case</span> <span class="variable">$op</span> <span class="keyword">in</span></div><div class="line">        a)</div><div class="line"> 	<span class="built_in">echo</span> <span class="string">"you selected a"</span>;;</div><div class="line">        b)</div><div class="line">	<span class="built_in">echo</span> <span class="string">"you selected b"</span>;;</div><div class="line">	c)</div><div class="line">	<span class="built_in">echo</span> <span class="string">"you selected c"</span>;;</div><div class="line">	*)</div><div class="line">	<span class="built_in">echo</span> <span class="string">"error"</span></div><div class="line"><span class="keyword">esac</span></div></pre></td></tr></table></figure>
<h2 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> 条件</div><div class="line"><span class="keyword">do</span></div><div class="line">    命令</div><div class="line"><span class="keyword">done</span></div><div class="line"></div><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line"><span class="comment">#while test do ... done</span></div><div class="line"></div><div class="line">num=1</div><div class="line">sum=0</div><div class="line"><span class="keyword">while</span> [ <span class="variable">$num</span> -le 100 ]</div><div class="line"><span class="keyword">do</span></div><div class="line">	sum=`expr <span class="variable">$sum</span> + <span class="variable">$num</span>`</div><div class="line">	num=`expr <span class="variable">$num</span> + 1`</div><div class="line"><span class="keyword">done</span></div><div class="line"><span class="comment">#sleep 5</span></div><div class="line"><span class="built_in">echo</span> <span class="variable">$sum</span></div><div class="line"></div><div class="line">sleep 5 等待5s</div></pre></td></tr></table></figure>
<h2 id="break和continue-test"><a href="#break和continue-test" class="headerlink" title="break和continue test"></a>break和continue test</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">在shell编程里也会出现<span class="built_in">break</span>和<span class="built_in">continue</span>，它的含义和我们java里一样。</div><div class="line"><span class="built_in">break</span> 跳出循环</div><div class="line"><span class="built_in">continue</span> 继续执行下一次循环</div><div class="line"></div><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line">i=0</div><div class="line"><span class="keyword">while</span> [ <span class="variable">$i</span> -le 100 ]</div><div class="line"><span class="keyword">do</span></div><div class="line">	i=`expr <span class="variable">$i</span> + 1`</div><div class="line">	<span class="keyword">if</span> [ <span class="variable">$i</span> -eq 5 -o <span class="variable">$i</span> -eq 10 ]</div><div class="line">		<span class="keyword">then</span> <span class="built_in">continue</span>;</div><div class="line">	<span class="keyword">else</span> </div><div class="line">		<span class="built_in">echo</span> <span class="string">"this number is <span class="variable">$i</span>"</span></div><div class="line">	<span class="keyword">fi</span></div><div class="line"></div><div class="line">	<span class="keyword">if</span> [ <span class="variable">$i</span> -eq 15 ]</div><div class="line">		<span class="keyword">then</span> <span class="built_in">break</span>;</div><div class="line">        <span class="keyword">fi</span> </div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>]]></content>
      
        
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
